1.定时计数器主要由加法计数器和方式寄存器和控制寄存器组成。

2.对应的引脚为TO(P3.4)和T1(P3.5)。

3.做计数器的时候，在每个机器周期的S5P2时刻对定时计数器的引脚进行采样，所以外部计数脉冲的频率要小于金振频率的1/24。

4.TMOD方式寄存器的字节地址为89H，所以不能按照位访问（特殊功能寄存器中地址能被8整除的寄存器才可以按照位访问）。TMOD的高四位为定时器1的方式控制位，第四位为定时器0的方式控制位，就拿第四位举例说明，
第四位从低到高依次为M0、M1、C/T、GATE。
M0和M1为T0的工作方式选择位，T0可以选择四种工作方式，T1只能选择3种。方式0为13位定时计数方式；方式1位16位定时计数方式，方式2位8位自动装入初值的计数方式，方式3为2个8位定时计数器方式。
C/T为定时或计数方式选择位，若为0则是定时器，若为1则是计数器。
GATE为是否允许定时计数器的启动受到外部中断信号的影响。为0时不受影响，1时受影响。

5.TCON控制寄存器字节为88H，所以可以位寻址。其低四位与外部中断有关，高四位与定时计数器有关，所以这里只介绍高四位。D0--D7依次为IT0、IE0、IT1、IE1、TR0、TF0、TR1、TF1.
TF为中断溢出标志位，如果定时计数器计满时，如果中断允许其中断（总中断开关EA=1，ET=1）则对应的定时计数器可以溢出中断,中断结束后该标志位自动清零。
TR为定时计数器启动位，TR=1时启动，TR=0时停止。

6.方式0为低五位和高八位。所以最大计数值为2的13次方即8192，使用时应该先装入初值，初值等于8192-计数值。并把初值的高八位装进TH,低五位装进TL。举例：若计数1000，则初值为7192，对应的二进制为
1110000011000B,则TH=11100000，TL=00011000.使用该方式时，每次完成计数，就需要重新装入初值。

7.方式1为16位定时计数方式，与方式0基本一致，只是多了3位。

8.方式2位8位自动重置定时计数方式，开始时把初值同时装入TH和TL，TL用来计数，TH用来存储初值，TL计满时溢出，让TH的值自动进入TL.

9.方式3一般用的相对较少，仅在定时计数器1工作在串口波特率发生器的时候，系统又不得不用两个定时计数器的时候才会用到。

10.每一个脉冲的持续时间必须大于一个机器周期，否则脉冲时间过短，还未进行采样，信号就已经发生多次变化会导致数据的丢失和欠缺。

11.确定一个负跳变必须要用2个机器周期，第一个机器周期采样到高电平，第二个机器周期采样到低电平，才能确定产生了负跳变。所以外部输入脉冲的最高频率为振荡器频率的1/24，例如，金振的频率为6MHz
那么允许输入的脉冲最高频率为250KHz。

12.定时计数器的初始化过程：1.确定定时还是计数，即TMOD寄存器的C/T位为0还是1.   2.根据定时计数所需的计数值，选择合适的工作方式，即M0,M1的值。  3.根据计数值算出初值，并写入初值寄存器，TH,TL.
    4.开放定时计数器中断，即IE中ET=1,再开放总中断开关EA=1.   5.在TCON中设置TR的值，确定启动。 6. 程序设计



